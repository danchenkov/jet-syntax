{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Jet Template",
	"scopeName": "text.html.jet",
	"fileTypes": [
		"jet",
		"html"
	],
	"patterns": [
		{
			"yaml.format.enable": true,
			"comment": "Front matter in YAML",
			"include": "#frontMatterYAML"
		},
		{
			"xml.format.enable": true,
			"comment": "Front matter in XML",
			"include": "#frontmatterXML"
		},
		{
			"comment": "Comments",
			"include": "#commentBlock"
		},
		{
			"comment": "Content blocks",
			"include": "#contentBlock"
		},
		{
			"comment": "Control",
			"name": "support.constant.jet",
			"match": "(?<=\\{\\{)\\s*(if|else if|else|end|block|yield|range|extends|include|import)"
		},
		{
			"comment": "Keywords",
			"name": "keyword.control.jet",
			"match": "\\b(if|while|for|return)\\b"
		},
		{
			"comment": "Public functions/fields",
			"match": "(?<=[\\. {])[A-Z]\\w*(?=.*}})",
			"name": "support.function.builtin.jet"
		},
		{
			"comment": "Built-in functions invoked",
			"match": "\\b(isset|len|lower|upper|hasPrefix|hasSuffix|repeat|replace|splt|trimSpace|html|url|safeHtml|safeJs|raw|writeJson|map)\\b(?=\\()",
			"name": "support.function.builtin.jet"
		},
		{
			"comment": "Built-in functions pipped",
			"match": "(?<=\\|)\\s*(lower|upper|hasPrefix|hasSuffix|repeat|replace|splt|trimSpace|html|url|safeHtml|safeJs|raw|writeJson)",
			"name": "support.function.builtin.jet"
		},
		{
			"comment": "Content",
			"include": "#content"
		},
		{
			"comment": "Quoted strings",
			"name": "string.quoted.double.jet",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.jet",
					"match": "\\\\."
				}
			]
		}
	],
	"repository": {
		"frontmatterYAML": {
			"begin": "^-{3}$",
			"beginCaptures": {
				"0": {
					"name": "punctuation.definition.frontmatter.begin"
				}
			},
			"end": "^-{3}$",
			"endCaptures": {
				"0": {
					"name": "punctuation.definition.frontmatter.end"
				}
			},
			"name": "meta.embedded.frontmatter.yaml",
			"patterns": [
				{
					"include": "source.yaml"
				}
			]
		},
		"frontmatterXML": {
			"begin": "^{{define \"Attrs\"}}$",
			"beginCaptures": {
				"0": {
					"name": "punctuation.definition.frontmatter.begin"
				}
			},
			"end": "^{{end}}$",
			"endCaptures": {
				"0": {
					"name": "punctuation.definition.frontmatter.end"
				}
			},
			"name": "meta.embedded.frontmatter.xml",
			"patterns": [
				{
					"include": "text.xml"
				}
			]
		},
		"contentBlock": {
			"begin": "^{{define\\s.*?}}$",
			"beginCaptures": {
				"0": {
					"name": "punctuation.definition.contentblock.begin"
				}
			},
			"end": "^{{end}}$",
			"endCaptures": {
				"0": {
					"name": "punctuation.definition.contentblock.end"
				}
			},
			"name": "embedded.text.html.jet",
			"patterns": [
				{
					"include": "text.html.jet"
				}
			]
		},
		"commentBlock": {
			"begin": "\\{\\*",
			"beginCaptures": {
				"0": {
					"name": "punctuation.definition.comment.begin"
				}
			},
			"end": "\\*\\}",
			"endCaptures": {
				"0": {
					"name": "punctuation.definition.comment.end"
				}
			},
			"name": "comment.block"
		},
		"content": {
			"include": "text.html.basic"
		}
	}
}